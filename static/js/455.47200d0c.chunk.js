"use strict";(self.webpackChunkdynamicapp=self.webpackChunkdynamicapp||[]).push([[455],{18455:(t,a,e)=>{e.r(a),e.d(a,{default:()=>c});var i=e(65043),n=e(24940),o=e(28858),s=e(77784),l=e(32039);class r{static calcPaths(t,a){let e=200,i=[[]],n=0,o=this.calcDistance(t,a);if(o<=e)i[n].push({x:t.lon,y:t.lat}),i[n].push({x:a.lon,y:a.lat});else{let s=t,l=t;for(let t=e;t<=o;t+=e){l=s,i[n].push({x:s.lon,y:s.lat});let t=this.calcBearing(s,a);s=this.calcDestination(s,t,e),l.lon>150&&s.lon<-150?(i[n].push({x:180,y:s.lat}),i.push([]),n++,s={lon:-180,lat:s.lat}):l.lon<-150&&s.lon>150&&(i[n].push({x:-180,y:s.lat}),i.push([]),n++,s={lon:180,lat:s.lat})}i[n].push({x:a.lon,y:a.lat})}return i}static calcBearing(t,a){t=this.toRadianLocation(t);let e=(a=this.toRadianLocation(a)).lon-t.lon,i=Math.sin(e)*Math.cos(a.lat),n=Math.cos(t.lat)*Math.sin(a.lat)-Math.sin(t.lat)*Math.cos(a.lat)*Math.cos(e),o=Math.atan2(i,n);return this.toDegreesNormalized(o)}static calcDestination(t,a,e){t=this.toRadianLocation(t),a=this.toRadians(a),e/=6371;let i=Math.asin(Math.sin(t.lat)*Math.cos(e)+Math.cos(t.lat)*Math.sin(e)*Math.cos(a)),n=Math.sin(a)*Math.sin(e)*Math.cos(t.lat),o=Math.cos(e)-Math.sin(t.lat)*Math.sin(t.lat),s=t.lon+Math.atan2(n,o);return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,s=this.toDegrees(s),i=this.toDegrees(i),{lon:s,lat:i}}static calcDistance(t,a){t=this.toRadianLocation(t),a=this.toRadianLocation(a);let e=Math.sin(t.lat)*Math.sin(a.lat),i=Math.cos(t.lat)*Math.cos(a.lat),n=a.lon-t.lon;return 6371*Math.acos(e+i*Math.cos(n))}static toRadianLocation(t){return{lon:this.toRadians(t.lon),lat:this.toRadians(t.lat)}}static toRadians(t){return t*Math.PI/180}static toDegrees(t){return 180*t/Math.PI}static toDegreesNormalized(t){let a=this.toDegrees(t);return a=(a+360)%360,a}static toStringLat(t){let a=Math.abs(t).toFixed(1)+"\xb0";return t>0?a+"N":a+"S"}static toStringLon(t){let a=Math.abs(t),e=a<100?a.toFixed(1):a.toFixed(0);return t>0?e+"\xb0E":e+"\xb0W"}static toStringAbbr(t){return t>1e12?(t/1e12).toFixed(1)+" T":t>1e9?(t/1e9).toFixed(1)+" B":t>1e6?(t/1e6).toFixed(1)+" M":t>1e3?(t/1e3).toFixed(1)+" K":t.toFixed(0)}static getLongitude(t){return t.x?t.x:t.lon?t.lon:t.longitude?t.longitude:Number.NaN}static getLatitude(t){return t.y?t.y:t.lat?t.lat:t.latitude?t.latitude:Number.NaN}static getBounds(t){let a=90,e=-90,i=180,n=-180;for(const o of t){const t=this.getLongitude(o);Number.isNaN(t)||(i=Math.min(i,t),n=Math.max(n,t));const s=this.getLatitude(o);Number.isNaN(s)||(a=Math.min(a,s),e=Math.max(e,s))}return{left:i,top:a,width:Math.abs(n-i),height:Math.abs(e-a)}}static getNightShapes(){let t=[],a=[];for(let i=-180;i<=180;i+=1){let t=i,e=75*Math.cos(i*Math.PI/180);a.push({x:t,y:e})}let e={points:[a]};return t.push(e),t}}var h=e(70579);n.W.register(),l.c.register();const c=t=>{let{gadget:a,isFullscreen:e}=t;const[n,l]=(0,i.useState)(null),[c,d]=(0,i.useState)([]),[u,M]=(0,i.useState)(!0);(0,i.useEffect)((()=>{fetch("/DynamicApp"+a.datasource).then((t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.json()})).then((t=>{d(t),M(!1)})).catch((t=>{console.error("Error fetching data:",t),M(!1)}))}),[]);const g=()=>{if(n&&c.length>0){const t=r.getBounds(c);t&&n.zoomToGeographic(t)}};return(0,i.useEffect)((()=>{g()}),[e,n,c]),(0,i.useEffect)((()=>{const t=()=>{g()};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[n,c]),u?(0,h.jsx)("div",{children:"Loading map data..."}):(0,h.jsx)("div",{style:{width:"100%",height:e?"100vh":a.height,minHeight:a.height},children:(0,h.jsx)(o.E,{width:"100%",height:"100%",zoomable:!0,isHorizontalZoomEnabled:!0,isVerticalZoomEnabled:!0,panModifier:"None",ref:l,defaultInteraction:"DragPan",children:(0,h.jsx)(s.b,{dataSource:c,latitudeMemberPath:"latitude",longitudeMemberPath:"longitude",markerType:"Circle",markerBrush:"yellow",markerOutline:"black",showTooltip:!0,name:"wellSeries",tooltipTemplate:t=>t.item?`<div>\n              Well: ${t.item.name} <br/>\n              Type: ${t.item.type} <br/>\n              Lat: ${t.item.latitude} <br/>\n              Lng: ${t.item.longitude}\n            </div>`:(console.error("No item found in context for tooltip rendering"),"<div>No data available</div>")})})})}}}]);
//# sourceMappingURL=455.47200d0c.chunk.js.map